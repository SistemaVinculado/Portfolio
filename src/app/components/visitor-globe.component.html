<div role="dialog" aria-modal="true" aria-labelledby="visitor-globe-title" class="fixed inset-0 z-50 flex items-center justify-center p-4">
    <!-- Backdrop -->
    <div (click)="close.emit()" class="fixed inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-sm transition-opacity duration-300 ease-in-out animate-fade-in"></div>

    <!-- Modal Panel -->
    <div class="relative w-full max-w-4xl h-[80vh] max-h-[800px] bg-[#1C1A27] rounded-2xl shadow-xl transform transition-all duration-300 ease-in-out animate-slide-up-fade flex flex-col overflow-hidden">
        <!-- Header -->
        <div class="absolute top-0 left-0 right-0 z-10 p-6 flex items-center justify-between pointer-events-none">
            <div class="flex items-center space-x-3 pointer-events-auto bg-[#1C1A27]/50 backdrop-blur-sm p-3 rounded-xl">
                <div class="bg-purple-900/50 p-2 rounded-lg">
                    <svg class="w-6 h-6 text-purple-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582" />
                    </svg>
                </div>
                <div>
                    <h3 id="visitor-globe-title" class="text-xl font-bold text-white">Real-time Visitor Globe</h3>
                    <p class="text-sm text-gray-400">Simulated live traffic feed</p>
                </div>
            </div>
            <button (click)="close.emit()" aria-label="Close Visitor Globe" class="p-2 rounded-full text-gray-400 bg-black/50 hover:bg-gray-700 transition-colors pointer-events-auto">
                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
        </div>
        
        <!-- Canvas -->
        <canvas #globeCanvas class="w-full h-full block"></canvas>

        <!-- Latest Visitor Info -->
        @if (latestVisitor(); as visitor) {
            <div class="absolute bottom-6 left-6 z-10 bg-[#1C1A27]/50 backdrop-blur-sm p-4 rounded-xl text-white shadow-lg">
                <p class="text-xs font-semibold uppercase tracking-wider text-gray-400">Latest Visitor</p>
                <p class="text-lg font-bold">{{ visitor.city }}, {{ visitor.country }}</p>
            </div>
        }
    </div>
</div>
